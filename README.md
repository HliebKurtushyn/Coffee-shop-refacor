# The Corner - Кав'ярня (Презентаційна версія) (Refactored)

![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)
![Flask](https://img.shields.io/badge/Flask-2.3-green.svg)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-13-purple.svg)
![License](https://img.shields.io/badge/License-MIT-yellow.svg)

Сучасний веб-застосунок кав'ярні з системою онлайн-замовлень, керуванням меню та адміністрацією.
Статус: В розробці

## Зміст
- [Про проект](#про-проект)
- [Функціонал](#функціонал)
- [Технологі](#технологі)
- [Встановлення](#встановлення)
  - [Windows](#windows)
  - [Linux (Ubuntu/Debian)](#linux-ubuntudebian)
- [Налаштування змінних оточення](#налаштування-змінних-оточення)
- [Запуск](#запуск)
- [Вирішення поширених проблем](#вирішення-поширених-проблем)
- [Коротко: Зміни після рефакторингу](#коротко-зміни-після-рефакторингу) (!)
- [Нотатки](#нотатки)

## Про проект
Цей проект - частина курсу Python Web з GoITeens. Сама ідея кав'ярні з'явилась випадково, коли я думав, як я можу зробити свій проект більш особливим. Далі я буду описувати проект, ніби він не для презентації.
Цей проект призначений для тих людей, які хочуть щось замовити зараз, але прийти пізніше. Для тих, хто хоче зробити подарунок, замовивши кави на місяць. Для тих, хто просто хоче замовити каву на завтра.
Основна ціль проекту - це вебсайт для кав'ярні "The Corner", де все зроблено для зручності клієнтів.

## Основний функціонал
### Для користувачів
- **Реєстрація та авторизація** з захистом паролів
- **Профіль** з мінімальною, але зрозумілою інформацією
- **Перегляд меню** з актуальними цінами, знижками та пропозиціями
- **Сторінка позицій**, де вказана детальна інформація та актуальна ціна, включаючи пропозиції, знижки тощо
- **Перегляд кошику** з можливістю видалення об'єктів або зміни кількості
- **Оплата** - безпечна оплата без введення реальних даних
- **Перегляд активних купонів**
- **Перегляд конкретного купону** з QR-кодом всередині, який ви покажете на касі

### Для адміністраторів
- **Панель адміністратора** з статистикою
- **Додавання позицій/пропозицій** для поповнення асортименту
- **Деактивація позицій/пропозицій** для вимкнення асортименту, що закінчився
- **Активація позицій/пропозицій** для активації асортименту, що знову з'явився
- **Видалення деактивованих позицій/пропозицій** якщо щось насправді непотрібне

## Технологі
### Backend
- Python 3.12.3
- Flask, Flask-login
- SQLAlchemy 2.0

### Database
- PostgreSQL
(Структури див. нижче)

### Frontend
- HTML5/CSS3
- Bootstrap
- Jinja2

## Встановлення
*Note: Переконайтеся, що у вас встановлений [Python 3.8+](https://www.python.org/downloads/)*
### Windows
- Відкрити командний рядок
- Перейти в директорію, в яку бажаєте встановити застосунок (наприклад, "Завантаження")
- Виконати команди нижче:
    ```
    git clone https://github.com/HliebKurtushyn/Coffee-shop-refactor
    cd Coffee-shop-refactor
    python -m venv .venv
    .venv\Scripts\activate
    pip install -r requirements.txt
    ```
### Linux - Debian based (Ubuntu, Debian...)
- Відкрити командний рядок (Ctrl + Alt + T)
- Перейти в директорію, в яку бажаєте встановити застосунок (наприклад, "Завантаження")
- Виконати команди нижче:
    ```
    git clone https://github.com/HliebKurtushyn/Coffee-shop-refactor
    cd Coffee-shop-refactor
    python3 -m venv .venv
    source .venv/bin/activate
    pip install -r requirements.txt
    ```
## Налаштування змінних оточення
- У кореневій директорії проекту створіть файл ```.env```
*Note: Зверніть увагу на значення в ```<...>```, туди **обов'язково** вставити значення, що відповідають вашим налаштуванням.*
*Коротко, що треба зробити: 1. Створити БД в [pgAdmin4](https://www.pgadmin.org/download/) (Інструкцію шукати на сайті або в інтернеті). 2. Згенерувати секретний ключ у будь-якому генераторі значень (мінімум 31 символ)*
```env
# Налаштування бази даних
SECRET_KEY='<secret_key>'

DATABASE_URL='postgresql+psycopg2://<юзернейм>:<пароль>@localhost:<port>/<db_name>'

ADMIN_EMAILS=['<your_email>']
ADMINS=['<your_username>']
```

## Запуск
```cmd/bash
python3 main.py
 ```

### Деактивація venv

Коли закінчите роботу:
```cmd
deactivate
```

## Вирішення поширених проблем

### Проблема: "python is not recognized"
**Рішення:** Перевстановіть Python або додайте його до PATH

### Проблема: Помилки при встановленні пакетів
**Рішення:** Спробуйте:
```cmd
pip install --upgrade pip
python -m pip install -r requirements.txt
```

### Проблема: Не встановлений Git
**Рішення:** Завантажте Git з [git-scm.com](https://git-scm.com/)

## Коротко: Зміни після рефакторингу
- Розділив сторінки де використовується POST за REST'овськими стандартами (app.get(), app.post())
- Пофіксив нечисленну купу багів (реально багато)
- Покращив структуру
- Стандартизував всі змінні
- Додав логування
- Наче все..

## Нотатки

- Завжди активуйте .venv перед роботою з проектом
- Для редактора коду: оберіть інтерпретатор з папки `.venv`

[↑ Нагору до змісту](#зміст)