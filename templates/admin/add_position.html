{% extends 'base_admin.html' %}

{% block title %}<title>Add Position - Admin Panel - The Corner</title>{% endblock %}

{% block head %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css-custom/admin/admin_form.css') }}">
{% endblock %}

{% block content %}
    <h1>Управління позиціями меню</h1>

    <!-- Додавання нової позиції -->
    <div class="admin-form-container">
        <h2>Додавання нової позиції</h2>
        <form action="{{ url_for('add_position_post') }}" method="post" enctype="multipart/form-data" class="admin-form">
            <input type="hidden" name="csrf_token" value="{{ csrf_token }}">

            <div class="form-group">
                <label for="name">Назва позиції:</label>
                <input type="text" name="name" id="name" placeholder="Введіть назву позиції" required>
            </div>

            <div class="form-group">
                <label for="img">Зображення:</label>
                <input type="file" name="img" id="img" accept="image/*" required>
            </div>

            <div class="form-group">
                <label for="ingredients">Інгредієнти:</label>
                <textarea name="ingredients" id="ingredients" placeholder="Перелічіть інгредієнти" rows="3" required></textarea>
            </div>

            <div class="form-group">
                <label for="description">Опис:</label>
                <textarea name="description" id="description" placeholder="Додайте опис позиції" rows="3" required></textarea>
            </div>

            <div class="form-group">
                <label for="price">Ціна (грн):</label>
                <input type="number" name="price" id="price" placeholder="Введіть ціну" min="0" step="0.01" required>
            </div>

            <div class="form-group">
                <label for="weight">Вага (г):</label>
                <input type="number" name="weight" id="weight" placeholder="Введіть вагу" min="0" required>
            </div>

            <button type="submit" class="btn-form">Додати товар</button>
        </form>
    </div>

    <!-- Деактивація позицій -->
    <div class="admin-form-container warning-box">
        <h2>Деактивація позицій</h2>
        <form action="{{ url_for('deactivate_position') }}" method="post" class="admin-form">
            <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
            
            <div class="form-group">
                <label for="deactivate_position">Оберіть позицію для деактивації:</label>
                <select name="position_id" id="deactivate_position" required>
                    {% for position in active_positions %}
                        <option value="{{ position.id }}">{{ position.name }} - {{ position.price }} грн</option>
                    {% endfor %}
                </select>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" name="confirm_delete" id="confirm_deactivate_position" required>
                <span for="confirm_deactivate_position">Підтвердити деактивацію</span>
            </div>

            <button type="submit" class="btn-form btn-danger">Деактивувати</button>
        </form>
    </div>

    <!-- Активація позицій -->
    <div class="admin-form-container success-box">
        <h2>Активація позицій</h2>
        <form action="{{ url_for('activate_position') }}" method="post" class="admin-form">
            <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
            
            <div class="form-group">
                <label for="activate_position">Оберіть позицію для активації:</label>
                <select name="position_id" id="activate_position" required>
                    {% for position in deactivated_positions %}
                        <option value="{{ position.id }}">{{ position.name }} - {{ position.price }} грн</option>
                    {% endfor %}
                </select>
            </div>

            <button type="submit" class="btn-form btn-success">Активувати</button>
        </form>
    </div>

    <!-- Видалення деактивованих позицій -->
    <div class="admin-form-container danger-box">
        <h2>Видалити всі деактивовані позиції</h2>
        <form action="{{ url_for('delete_positions') }}" method="post" class="admin-form">
            <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
            
            <div class="checkbox-group">
                <input type="checkbox" name="confirm_delete" id="confirm_delete_positions" required>
                <span for="confirm_delete_positions">Ви впевнені, що хочете видалити всі деактивовані позиції?</span>
            </div>

            <button type="submit" class="btn-form btn-danger">Видалити всі</button>
        </form>
    </div>
{% endblock %}