{% extends 'base.html' %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css-custom/home/home.css') }}">
{% endblock %}

{% block title %}–ì–æ–ª–æ–≤–Ω–∞ - The Corner{% endblock %}

{% block content %}
    <div class="container home-container">
        <div class="welcome-user">
            <h1 class="welcome-title">–í—ñ—Ç–∞—î–º–æ, {{ user.username }}! üëã</h1>
            <p class="welcome-text">–†–∞–¥—ñ –±–∞—á–∏—Ç–∏ –≤–∞—Å –∑–Ω–æ–≤—É —É The Corner!</p>
            
            <div class="user-stats">
                <div class="stat-item">
                    <div class="stat-number">{{ user_coupons_count }}</div>
                    <div class="stat-label">–ó–∞–º–æ–≤–ª–µ–Ω—å</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">{{ user_days_member }}</div>
                    <div class="stat-label">–î–Ω—ñ–≤ –∑ –Ω–∞–º–∏</div>
                </div>
            </div>
        </div>

        <div class="quick-actions">
            <a href="{{ url_for('menu') }}" class="action-card">
                <div class="action-icon">üìñ</div>
                <h3 class="action-title">–ú–µ–Ω—é</h3>
                <p class="action-description">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ –ø–æ–∑–∏—Ü—ñ—ó —Ç–∞ –∞–∫—Ü—ñ—ó</p>
            </a>

            <a href="{{ url_for('basket') }}" class="action-card">
                <div class="action-icon">üõí</div>
                <h3 class="action-title">–ö–æ—à–∏–∫</h3>
                <p class="action-description">–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</p>
            </a>

            <a href="{{ url_for('my_coupons') }}" class="action-card">
                <div class="action-icon">üé´</div>
                <h3 class="action-title">–ú–æ—ó –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h3>
                <p class="action-description">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é –∑–∞–º–æ–≤–ª–µ–Ω—å</p>
            </a>

            <a href="{{ url_for('profile') }}" class="action-card">
                <div class="action-icon">üë§</div>
                <h3 class="action-title">–ü—Ä–æ—Ñ—ñ–ª—å</h3>
                <p class="action-description">–ö–µ—Ä—É–≤–∞–Ω–Ω—è –∞–∫–∞—É–Ω—Ç–æ–º</p>
            </a>
        </div>

        <div class="recent-orders">
            <h2 class="section-title">–û—Å—Ç–∞–Ω–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h2>
            <div class="order-list">
                {% if recent_orders %}
                    {% for order in recent_orders %}
                    <div class="order-item">
                        <div class="order-info">
                            <div class="order-number">–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è ‚Ññ{{ order.id }}</div>
                            <div class="order-date">{{ order.order_time.strftime('%d.%m.%Y %H:%M') }}</div>
                        </div>
                        {% if order.active %}
                            <div class="order-status-active">–ê–∫—Ç–∏–≤–Ω–æ</div>
                        {% else %}
                            <div class="order-status-completed">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</div>
                        {% endif %}
                    </div>
                    {% endfor %}
                {% else %}
                    <p style="text-align: center; color: #7f8c8d;">–£ –≤–∞—Å —â–µ –Ω–µ–º–∞—î –∑–∞–º–æ–≤–ª–µ–Ω—å</p>
                {% endif %}
            </div>
        </div>

        <div class="special-offers">
            <h2 class="section-title">–°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó</h2>
            <div class="offers-grid">
                {% for offer in offers %}
                    {% if offer.active %}
                        <div class="offer-card">
                            <div class="offer-img-wrapper">
                                <img class="dish-img" src="{{ url_for('static', filename='menu/' + offer.menu.file_name) }}" alt="{{ offer.menu.name }}">
                            </div>
                            <span class="offer-badge">-{{ offer.discount }}%</span>
                            <h3 class="offer-title">{{ offer.menu.name }}</h3>
                            <p class="offer-description">{{ offer.menu.description }}</p>
                            <div class="offer-price">{{ offer.menu.price }}</div>
                            <div class="offer-new-price">{{ offer.menu.price - (offer.menu.price * offer.discount / 100) | round(0) }}‚Ç¥</div>
                        </div>
                    {% endif %}
                {% else %}
                    <div class="offer-card">
                        <h3 class="offer-title">–ù–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–∏—Ö –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π</h3>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}

{% block btn_back %}
    <span></span>
{% endblock %}